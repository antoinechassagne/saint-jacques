{"version":3,"sources":["services/CookieManager.js","components/Header.jsx","helpers/functions/randomId.js","components/search/SearchSpots.jsx","services/Api.js","api/spots.js","api/users.js","pages/Home.jsx","api/authentication.js","components/buttons/ButtonPrimary.jsx","components/form/FormBase.jsx","components/form/inputs/InputEmail.jsx","components/form/inputs/InputPassword.jsx","settings/routes.js","pages/Spots.jsx","pages/Spot.jsx","pages/SignIn.jsx","pages/SignUp.jsx","pages/NotFound.jsx","App.jsx","index.js"],"names":["name","match","document","cookie","RegExp","value","Header","props","pages","Object","keys","filter","key","menu","map","isLogged","push","signIn","className","index","exact","to","process","path","activeClassName","label","onClick","CookieManager","window","location","replace","home","randomId","Math","random","toString","substring","SearchSpots","useState","loading","setLoading","error","setError","results","setResults","displayResults","setDisplayResults","debounce","setDebounce","requestId","setRequestId","resultsContainer","useRef","input","handleClick","useCallback","event","target","isSameNode","current","removeEventListener","handleChange","clearTimeout","setTimeout","term","search","then","data","catch","useEffect","addEventListener","htmlFor","type","ref","onChange","e","length","spot","id","Api","axios","create","baseURL","interceptors","request","use","config","token","headers","Authorization","Promise","reject","response","status","reload","routes","notFound","fetchSpots","get","fetchSpot","searchSpot","params","fetchUserFavoriteSpots","addFavoriteSpot","removeFavoriteSpot","Home","title","favoriteSpots","setFavoriteSpots","loadingFavoriteSpots","setLoadingFavoriteSpots","setErrorFavoriteSpots","ApiUsers","ApiSpots","renderFavoriteSpots","email","password","post","ButtonPrimary","children","FormBase","inputsData","setInputsData","inputChange","update","valid","React","Children","child","cloneElement","el","inputs","forEach","required","onSubmit","preventDefault","form","prototype","hasOwnProperty","call","submit","handleSubmit","buttonLabel","InputEmail","inputValue","setInputValue","setValid","disableValidation","setDisableValidation","validation","pattern","validValue","onBlur","InputPassword","component","guard","spots","setSpots","isFavorite","setIsFavorite","setLoadingAddFavorite","setErrorAddFavorite","setSpot","useParams","AddFavoriteSpotButton","longitude","description","class","credentials","ApiAuthentication","signUp","identicalPasswords","setIdenticalPasswords","passwordConfirmation","notfound","role","aria-label","App","render","Page","renderPage","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.899e2a0f.chunk.js","sourcesContent":["export default {\n  /**\n   *\n   * @param {*} name The name of the cookie\n   * @returns {null|String} The value of the cookie\n   */\n  get(name) {\n    const match = document.cookie.match(new RegExp(`(^| )${name}=([^;]+)`));\n    if (!match) return null;\n    return match[2];\n  },\n  /**\n   *\n   *\n   * @param {String} name\n   * @param {String} value\n   */\n  set(name, value) {\n    document.cookie = `${name}=${value}`;\n  },\n  /**\n   *\n   * @param {*} name The name of the cookie\n   */\n  delete(name) {\n    document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/saint-jacques`;\n  },\n};\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport CookieManager from \"../services/CookieManager\";\n\nconst Header = (props) => {\n  // Remove routes that should not be in menu\n  const pages = Object.keys(props.pages)\n    .filter((key) => props.pages[key].menu)\n    .map((key) => props.pages[key]);\n\n  // If user isn't logged, we add signin link in menu\n  if (!props.isLogged) {\n    pages.push(props.pages.signIn);\n  }\n\n  const menu = () => {\n    const entries = Object.keys(pages).map((key, index) => (\n      <li key={index}>\n        <NavLink\n          exact={true}\n          to={`${process.env.PUBLIC_URL}${pages[key].path}`}\n          activeClassName=\"active\"\n        >\n          {pages[key].label}\n        </NavLink>\n      </li>\n    ));\n\n    return entries;\n  };\n\n  return (\n    <header className=\"header\">\n      <span className=\"header__brand\">Saint Jacques</span>\n      <nav>\n        <ul className=\"header__menu\">{menu()}</ul>\n        {props.isLogged && (\n          <button\n            onClick={() => {\n              CookieManager.delete(\"jwt\");\n              window.location.replace(\n                `${process.env.PUBLIC_URL}${props.pages.home.path}`\n              );\n            }}\n          >\n            Se déconnecter\n          </button>\n        )}\n      </nav>\n    </header>\n  );\n};\n\nexport default Header;\n","const randomId = () => {\n  return (\n    Math.random().toString(36).substring(2, 5) +\n    Math.random().toString(36).substring(2, 5)\n  );\n};\n\nexport default randomId;\n","import React, { useState, useRef, useCallback } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport randomId from \"../../helpers/functions/randomId\";\nimport { useEffect } from \"react\";\n\nconst SearchSpots = (props) => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [results, setResults] = useState([]);\n  const [displayResults, setDisplayResults] = useState(false);\n  const [debounce, setDebounce] = useState(null);\n  const [requestId, setRequestId] = useState(null);\n\n  const resultsContainer = useRef(null);\n  const input = useRef(null);\n\n  const handleClick = useCallback((event) => {\n    // If use click outisde if input or results\n    // Close the results container and remove click listener\n    if (\n      !event.target.isSameNode(input.current) &&\n      !event.target.isSameNode(resultsContainer.current)\n    ) {\n      setDisplayResults(false);\n      input.current.value = \"\";\n      window.removeEventListener(\"click\", handleClick);\n    }\n  }, []);\n\n  const fetchSpots = (term, currentRequestId) => {\n    if (currentRequestId !== requestId) return;\n    setError(false);\n    props\n      .search(term)\n      .then(({ data }) => {\n        setResults(data);\n        setLoading(false);\n      })\n      .catch(() => {\n        setError(true);\n        setLoading(false);\n      });\n  };\n\n  const handleChange = (event) => {\n    setLoading(true);\n    setDisplayResults(true);\n    const { value } = event.target;\n    if (!value) {\n      setResults([]);\n      setDisplayResults(false);\n      return;\n    }\n    clearTimeout(setDebounce(debounce));\n    setDebounce(\n      setTimeout(() => {\n        setRequestId(randomId());\n        fetchSpots(value, requestId);\n      }, 800)\n    );\n  };\n\n  useEffect(() => {\n    if (displayResults) {\n      window.addEventListener(\"click\", handleClick);\n    } else {\n      window.removeEventListener(\"click\", handleClick);\n    }\n    return () => window.removeEventListener(\"click\", handleClick);\n  }, [displayResults, handleClick]);\n\n  const renderResults = () => {\n    if (loading) return <span>Chargement...</span>;\n    if (error) return <span>Une erreur est survenue.</span>;\n    if (!results.length) return <span>Aucun résultat trouvé.</span>;\n    return (\n      <ul>\n        {results.map((spot, index) => (\n          <li key={index}>\n            <Link to={`${process.env.PUBLIC_URL}/spots/${spot.id}`}>\n              {spot.name}\n            </Link>\n          </li>\n        ))}\n      </ul>\n    );\n  };\n\n  return (\n    <div className=\"search\">\n      <div className=\"input\">\n        <label className=\"input__label\" htmlFor={props.name}>\n          {props.label}\n        </label>\n        <input\n          className=\"input__input\"\n          type=\"text\"\n          name={props.name}\n          ref={input}\n          onChange={(e) => {\n            handleChange(e);\n          }}\n        />\n      </div>\n      <div\n        ref={resultsContainer}\n        className={\n          displayResults\n            ? \"search__results search__results--active\"\n            : \"search__results\"\n        }\n      >\n        {renderResults()}\n      </div>\n    </div>\n  );\n};\n\nexport default SearchSpots;\n","import axios from \"axios\";\nimport CookieManager from \"./CookieManager\";\nimport routes from \"../settings/routes\";\n\nconst Api = axios.create({\n  baseURL:\n    process.env.NODE_ENV === \"development\"\n      ? \"http://127.0.0.1:8000/api\"\n      : \"https://saint-jacques.herokuapp.com/api\",\n});\n\nApi.interceptors.request.use(\n  (config) => {\n    const token = CookieManager.get(\"jwt\");\n\n    if (token != null) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\nApi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    // User ins't authenticated\n    if (error.response.status === 401) {\n      // Delete the previous JWT\n      CookieManager.delete(\"jwt\");\n      // Redirect user to login page\n      document.location.reload(true);\n      window.location.replace(`${process.env.PUBLIC_URL}${routes.signIn.path}`);\n    }\n    // Resource doesn't exists\n    if (error.response.status === 404) {\n      // Redirect to 404 page\n      window.location.replace(\n        `${process.env.PUBLIC_URL}${routes.notFound.path}`\n      );\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default Api;\n","import Api from \"../services/Api\";\n\n/**\n * @returns {Promise} HTTP Reponse\n */\nconst fetchSpots = () => Api.get(\"/spots\");\n\n/**\n * @param {Number} id Spot id\n * @returns {Promise} HTTP Response\n */\nconst fetchSpot = (id) => Api.get(`/spots/${id}`);\n\n/**\n * @param {String} term The term sought\n * @returns {Promise} HTTP Reponse\n */\nconst searchSpot = (term) =>\n  Api.get(\"/search/spots\", {\n    params: { search: term },\n  });\n\nexport default {\n  fetchSpots,\n  fetchSpot,\n  searchSpot,\n};\n","import Api from \"../services/Api\";\n\n/**\n * @returns {Promise} HTTP Reponse\n */\nconst fetchUserFavoriteSpots = () => Api.get(\"/users/favorite-spots\");\n\n/**\n * @param {Number} id The spot id\n * @returns {Promise} HTTP Reponse\n */\nconst addFavoriteSpot = (id) =>\n  Api.get(\"/users/add-favorite-spot\", {\n    params: { spot: id },\n  });\n\n/**\n * @param {Number} id The spot id\n * @returns {Promise} HTTP Reponse\n */\nconst removeFavoriteSpot = (id) =>\n  Api.get(\"/users/remove-favorite-spot\", {\n    params: { spot: id },\n  });\n\nexport default {\n  fetchUserFavoriteSpots,\n  addFavoriteSpot,\n  removeFavoriteSpot,\n};\n","import React, { useState, useEffect } from \"react\";\nimport CookieManager from \"../services/CookieManager\";\nimport SearchSpots from \"../components/search/SearchSpots\";\nimport ApiSpots from \"../api/spots\";\nimport ApiUsers from \"../api/users\";\n\nconst Home = () => {\n  document.title = \"Saint Jacques\";\n\n  const [favoriteSpots, setFavoriteSpots] = useState([]);\n  const [loadingFavoriteSpots, setLoadingFavoriteSpots] = useState(true);\n  const [errorFavoriteSpots, setErrorFavoriteSpots] = useState(false);\n\n  const isLogged = CookieManager.get(\"jwt\") ? true : false;\n\n  const fetchUserFavoriteSpots = () => {\n    setLoadingFavoriteSpots(true);\n    if (isLogged) {\n      ApiUsers.fetchUserFavoriteSpots()\n        .then(({ data }) => {\n          setLoadingFavoriteSpots(false);\n          setFavoriteSpots(data);\n        })\n        .catch(() => {\n          setErrorFavoriteSpots(true);\n          setLoadingFavoriteSpots(false);\n        });\n    }\n  };\n\n  useEffect(() => {\n    if (isLogged) {\n      fetchUserFavoriteSpots();\n    }\n  }, []);\n\n  const renderFavoriteSpots = () => {\n    if (!isLogged) return;\n\n    return (\n      <div className=\"favorite-spots\">\n        <h3>Spots favoris</h3>\n        {loadingFavoriteSpots && <span>Chargement...</span>}\n        {!loadingFavoriteSpots && !favoriteSpots.length && (\n          <span>Aucun spots favoris.</span>\n        )}\n        {favoriteSpots.map((spot) => (\n          <h4>{spot.name}</h4>\n        ))}\n      </div>\n    );\n  };\n\n  return (\n    <section className=\"page\">\n      <h1>Bienvenue sur Saint Jacques</h1>\n      <SearchSpots label=\"Rechercher un spot\" search={ApiSpots.searchSpot} />\n      {renderFavoriteSpots()}\n    </section>\n  );\n};\n\nexport default Home;\n","import Api from \"../services/Api\";\n\n/**\n * Ask for a Json Web Token\n *\n * @param {Object} Credentials Should contains `email` and `password`\n * @returns {Promise} HTTP Response\n */\nconst signIn = ({ email, password }) =>\n  Api.post(\"/signin\", { email, password });\n\n/**\n * Register the user\n *\n * @param {Object} Credentials Should contains `email` and `password`\n * @returns {Promise} HTTP Reponse\n */\nconst signUp = ({ email, password }) =>\n  Api.post(\"/signup\", { email, password });\n\nexport default {\n  signIn,\n  signUp,\n};\n","import React from \"react\";\n\nconst ButtonPrimary = (props) => (\n  <button className=\"button button--primary\">{props.children}</button>\n);\n\nexport default ButtonPrimary;\n","import React, { useState, useEffect } from \"react\";\nimport ButtonPrimary from \"../buttons/ButtonPrimary\";\n\nconst FormBase = (props) => {\n  const [inputsData, setInputsData] = useState({});\n\n  const inputChange = (input) => {\n    const update = { ...inputsData };\n\n    if (input.valid) {\n      // Input is valid, we update\n      update[input.name] = input;\n    } else {\n      // Input isn't valid, we remove its value and set valid to false\n      delete update[input.name].value;\n      update[input.name].valid = false;\n    }\n    setInputsData(update);\n  };\n\n  const handleSubmit = () => {\n    const form = {};\n    let error = false;\n\n    Object.keys(inputsData).forEach((key) => {\n      // If there is an error, skip\n      if (error) return;\n\n      // If an input isn't valid, set error to true\n      if (!inputsData[key].valid) {\n        error = true;\n        return;\n      }\n\n      // If input has a value property, push it to final form object\n      if (Object.prototype.hasOwnProperty.call(inputsData[key], \"value\")) {\n        form[inputsData[key].name] = inputsData[key].value;\n      }\n    });\n\n    if (!error) {\n      props.submit(form);\n    }\n  };\n\n  const children = React.Children.map(props.children, (child) => {\n    // Inject inputChange function as props on every input\n    if (!child) return undefined;\n    return React.cloneElement(child, {\n      inputChange,\n    });\n  }).filter((el) => el);\n\n  useEffect(() => {\n    // Register each input in state\n    const inputs = {};\n    props.children.forEach((child) => {\n      if (!child) return;\n      inputs[child.props.name] = {\n        name: child.props.name,\n        valid: child.props.required ? false : true,\n        required: child.props.required ? true : false,\n      };\n    });\n    setInputsData(inputs);\n  }, [setInputsData]);\n\n  return (\n    <form\n      className=\"form\"\n      onSubmit={(e) => {\n        e.preventDefault();\n        handleSubmit();\n      }}\n    >\n      {children}\n      <ButtonPrimary>{props.buttonLabel}</ButtonPrimary>\n    </form>\n  );\n};\n\nexport default FormBase;\n","import React, { useState, useEffect } from \"react\";\n\nconst InputEmail = (props) => {\n  const [inputValue, setInputValue] = useState(\"\");\n  const [valid, setValid] = useState(true);\n  const [disableValidation, setDisableValidation] = useState(true);\n\n  const validation = () => {\n    // Skip validation if validation prop is set to false\n    if (!props.validation) return;\n\n    // Skip validation when user is writing for the first time\n    if (disableValidation) return;\n\n    // Case where value is empty but required\n    if (props.required && !inputValue) {\n      setValid(false);\n      return;\n    }\n\n    // Regex validation\n    const pattern = new RegExp(\"[^@]+@[^.]+..+\");\n    const validValue = inputValue.match(pattern);\n    setValid(validValue ? true : false);\n  };\n\n  useEffect(() => {\n    // Validation\n    if (!disableValidation) {\n      validation();\n    }\n\n    // Send to parent\n    props.inputChange({\n      name: props.name,\n      value: inputValue,\n      valid,\n      required: props.required,\n    });\n  }, [disableValidation, inputValue, valid]);\n\n  return (\n    <div className=\"input\">\n      <label className=\"input__label\" htmlFor={props.name}>\n        {props.label}\n      </label>\n      <input\n        className=\"input__input\"\n        type=\"email\"\n        value={inputValue}\n        name={props.name}\n        required={props.required}\n        onChange={(e) => setInputValue(e.target.value)}\n        onBlur={(e) => {\n          // Enable validation on the first blur\n          if (disableValidation) {\n            setDisableValidation(false);\n            return;\n          }\n          setInputValue(e.target.value);\n        }}\n      />\n      {!valid && (\n        <span className=\"error\">Veuillez saisir une adresse email valide.</span>\n      )}\n    </div>\n  );\n};\n\nexport default InputEmail;\n","import React, { useState, useEffect } from \"react\";\n\nconst InputPassword = (props) => {\n  const [inputValue, setInputValue] = useState(\"\");\n  const [valid, setValid] = useState(true);\n  const [disableValidation, setDisableValidation] = useState(true);\n\n  const validation = () => {\n    // Skip validation if validation prop is set to false\n    if (!props.validation) return;\n\n    // Skip validation when user is writing for the first time\n    if (disableValidation) return;\n\n    // Case where value is empty but required\n    if (props.required && !inputValue) {\n      setValid(false);\n      return;\n    }\n\n    // Regex validation\n    const pattern = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\\s).{8,15}$/;\n    const validValue = inputValue.match(pattern);\n    setValid(validValue ? true : false);\n  };\n\n  useEffect(() => {\n    // Validation\n    if (!disableValidation) {\n      validation();\n    }\n\n    // Send to parent\n    props.inputChange({\n      name: props.name,\n      value: inputValue,\n      valid,\n      required: props.required,\n    });\n  }, [disableValidation, inputValue, valid]);\n\n  return (\n    <div className=\"input\">\n      <label className=\"input__label\" htmlFor={props.name}>\n        {props.label}\n      </label>\n      <input\n        className=\"input__input\"\n        type=\"password\"\n        value={inputValue}\n        name={props.name}\n        required={props.required}\n        onChange={(e) => setInputValue(e.target.value)}\n        onBlur={(e) => {\n          // Enable validation on the first blur\n          if (disableValidation) {\n            setDisableValidation(false);\n            return;\n          }\n          setInputValue(e.target.value);\n        }}\n      />\n      {!valid && (\n        <p className=\"error\">\n          Le mot de passe doit contenir au moins 8 caractères (dont au moins une\n          majuscule, une minuscule, un chiffre et un caractère spécial).\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default InputPassword;\n","import Home from \"../pages/Home\";\nimport SignIn from \"../pages/SignIn\";\nimport SignUp from \"../pages/SignUp\";\nimport Spots from \"../pages/Spots\";\nimport Spot from \"../pages/Spot\";\nimport NotFound from \"../pages/NotFound\";\n\nexport default {\n  home: {\n    path: \"/\",\n    label: \"Accueil\",\n    component: Home,\n    menu: true,\n    guard: false,\n  },\n  spots: {\n    path: \"/spots\",\n    label: \"Spots\",\n    component: Spots,\n    menu: true,\n    guard: false,\n  },\n  spot: {\n    path: \"/spots/:id\",\n    label: \"Spot\",\n    component: Spot,\n    menu: false,\n    guard: false,\n  },\n  signIn: {\n    path: \"/sign-in\",\n    label: \"Se connecter\",\n    component: SignIn,\n    menu: false,\n    guard: false,\n  },\n  signUp: {\n    path: \"/sign-up\",\n    label: \"S'inscrire'\",\n    component: SignUp,\n    menu: false,\n    guard: false,\n  },\n  notfound: {\n    path: \"/404\",\n    label: \"Erreur 404\",\n    component: NotFound,\n    menu: false,\n    guard: false,\n  },\n};\n","import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport ApiSpots from \"../api/spots\";\n\nconst Spots = () => {\n  document.title = \"Saint Jacques | Spots\";\n\n  const [spots, setSpots] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n\n  const fetchSpots = () => {\n    ApiSpots.fetchSpots()\n      .then(({ data }) => {\n        setSpots(data[\"hydra:member\"]);\n        setLoading(false);\n      })\n      .catch(() => {\n        setError(true);\n        setLoading(false);\n      });\n  };\n\n  useEffect(() => {\n    fetchSpots();\n  }, []);\n\n  const renderSpots = () => (\n    <ul>\n      {spots.map((spot, index) => (\n        <li key={index}>\n          <Link to={`${process.env.PUBLIC_URL}/spots/${spot.id}`}>\n            {spot.name}\n          </Link>\n        </li>\n      ))}\n    </ul>\n  );\n\n  const content = () => {\n    if (loading) return <span>Chargement...</span>;\n    if (error) return <span>Une erreur est survenue.</span>;\n    if (!spots.length) return <span>Aucun spot trouvé.</span>;\n    return renderSpots();\n  };\n\n  return (\n    <section className=\"page\">\n      <h1>Tous les spots</h1>\n      {content()}\n    </section>\n  );\n};\n\nexport default Spots;\n","import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport ApiSpots from \"../api/spots\";\nimport ApiUsers from \"../api/users\";\nimport CookieManager from \"../services/CookieManager\";\nimport routes from \"../settings/routes\";\n\nconst Spot = () => {\n  document.title = \"Saint Jacques | Chargement...\";\n\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [loadingAddFavorite, setLoadingAddFavorite] = useState(false);\n  const [errorAddFavorite, setErrorAddFavorite] = useState(false);\n  const [spot, setSpot] = useState(null);\n\n  const params = useParams();\n\n  const fetchSpot = () => {\n    ApiSpots.fetchSpot(params.id)\n      .then(({ data }) => {\n        document.title = `Saint Jacques | ${data.name}`;\n        setSpot(data);\n        setIsFavorite(data.isFavorite);\n        setLoading(false);\n      })\n      .catch(() => {\n        setError(true);\n        setLoading(false);\n      });\n  };\n\n  const toggleFavoriteSpot = () => {\n    setErrorAddFavorite(true);\n    setLoadingAddFavorite(true);\n    const method = isFavorite ? \"removeFavoriteSpot\" : \"addFavoriteSpot\";\n    ApiUsers[method](params.id)\n      .then(() => {\n        setLoadingAddFavorite(false);\n        setIsFavorite(!isFavorite);\n      })\n      .catch(() => {\n        setErrorAddFavorite(true);\n        setLoadingAddFavorite(false);\n      });\n  };\n\n  useEffect(() => {\n    fetchSpot();\n  }, []);\n\n  const AddFavoriteSpotButton = () => {\n    const isLogged = CookieManager.get(\"jwt\") ? true : false;\n\n    if (!isLogged) {\n      return (\n        <div>\n          <span>Connectez-vous pour ajouter ce spot à vos favoris</span>\n          <button\n            onClick={() => {\n              window.location.replace(\n                `${process.env.PUBLIC_URL}${routes.signIn.path}`\n              );\n            }}\n          >\n            Se connecter\n          </button>\n        </div>\n      );\n    }\n\n    return (\n      <button onClick={() => toggleFavoriteSpot()}>\n        {isFavorite ? \"Retirer de mes favoris\" : \"Ajouter à mes favoris\"}\n      </button>\n    );\n  };\n\n  const content = () => {\n    if (loading) return <span>Chargement...</span>;\n    if (error) return <span>Une erreur est survenue.</span>;\n    return (\n      <>\n        <h1>{spot.name}</h1>\n        <span>Longitude : {spot.longitude}</span>\n        <span>Latitude : {spot.longitude}</span>\n        <p>{spot.description}</p>\n        {AddFavoriteSpotButton()}\n      </>\n    );\n  };\n\n  return <section className=\"page\">{content()}</section>;\n};\n\nexport default Spot;\n","import React, { useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport routes from \"../settings/routes\";\nimport ApiAuthentication from \"../api/authentication\";\nimport CookieManager from \"../services/CookieManager\";\nimport FormBase from \"../components/form/FormBase\";\nimport InputEmail from \"../components/form/inputs/InputEmail\";\nimport InputPassword from \"../components/form/inputs/InputPassword\";\n\nconst SignIn = () => {\n  document.title = \"Saint Jacques | Se connecter\";\n\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n\n  const signIn = (credentials) => {\n    setLoading(true);\n    const { email, password } = credentials;\n    ApiAuthentication.signIn({ email, password })\n      .then((response) => {\n        if (response.status === 200) {\n          CookieManager.set(\"jwt\", response.data.token);\n          window.location.replace(`${process.env.PUBLIC_URL}`);\n        } else {\n          setError(true);\n          setLoading(false);\n        }\n      })\n      .catch(() => {\n        setError(true);\n        setLoading(false);\n      });\n  };\n\n  return (\n    <section className=\"page page--sign-in\">\n      <h1>Se connecter</h1>\n      {error && (\n        <span class=\"error\">Les identifiants saisis ne sont pas valides.</span>\n      )}\n      <FormBase submit={(data) => signIn(data)} buttonLabel=\"Se connecter\">\n        <InputEmail\n          required={true}\n          validation={true}\n          name=\"email\"\n          label=\"Email\"\n        />\n        <InputPassword\n          required={true}\n          validation={false}\n          name=\"password\"\n          label=\"Mot de passe\"\n        />\n      </FormBase>\n      {loading && <span>Chargement...</span>}\n      <span>Vous n'avez pas encore de compte ? </span>\n      <NavLink\n        exact={true}\n        to={`${process.env.PUBLIC_URL}${routes.signUp.path}`}\n      >\n        Créez en un dès maintenant !\n      </NavLink>\n    </section>\n  );\n};\n\nexport default SignIn;\n","import React, { useState } from \"react\";\nimport ApiAuthentication from \"../api/authentication\";\nimport CookieManager from \"../services/CookieManager\";\nimport FormBase from \"../components/form/FormBase\";\nimport InputEmail from \"../components/form/inputs/InputEmail\";\nimport InputPassword from \"../components/form/inputs/InputPassword\";\n\nconst SignUp = () => {\n  document.title = \"Saint Jacques | S'inscrire\";\n\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [identicalPasswords, setIdenticalPasswords] = useState(true);\n\n  // Sign up function executed when form is submitted\n  const signUp = (credentials) => {\n    const { email, password, passwordConfirmation } = credentials;\n\n    // Check if passwords are identicals\n    if (password !== passwordConfirmation) {\n      setIdenticalPasswords(false);\n      return;\n    }\n\n    setIdenticalPasswords(true);\n    setLoading(true);\n\n    ApiAuthentication.signUp({ email, password })\n      .then(() => {\n        // Once the user has been registered,\n        // we need to sign in\n        ApiAuthentication.signIn({ email, password })\n          .then((response) => {\n            CookieManager.set(\"jwt\", response.data.token);\n            window.location.replace(`${process.env.PUBLIC_URL}`);\n          })\n          .catch(() => {\n            setError(true);\n            setLoading(false);\n          });\n      })\n      .catch(() => {\n        setError(true);\n        setLoading(false);\n      });\n  };\n\n  return (\n    <section className=\"page page--sign-up\">\n      <h1>S'inscrire</h1>\n      {error && (\n        <span className=\"error\">\n          Les identifiants saisis ne sont pas valides. Il se peut que l'adresse\n          email saisie soit déjà associée à un compte.\n        </span>\n      )}\n      <FormBase submit={(data) => signUp(data)} buttonLabel=\"S'inscrire\">\n        <InputEmail\n          required={true}\n          validation={true}\n          name=\"email\"\n          label=\"Adresse email\"\n        />\n        <InputPassword\n          required={true}\n          validation={true}\n          name=\"password\"\n          label=\"Mot de passe\"\n        />\n        <InputPassword\n          required={true}\n          name=\"passwordConfirmation\"\n          label=\"Conformation du mot de passe\"\n        />\n        {!identicalPasswords && (\n          <span className=\"error\">\n            Les mots de passe saisis ne sont pas identiques.\n          </span>\n        )}\n        {loading && <span>Chargement...</span>}\n      </FormBase>\n    </section>\n  );\n};\n\nexport default SignUp;\n","import React from \"react\";\n\nconst NotFound = () => {\n  document.title = \"Saint Jacques | 404\";\n\n  return (\n    <section className=\"page\">\n      <h1>Erreur 404</h1>\n      <p>\n        Cette pas n'existe pas...{\" \"}\n        <span role=\"img\" aria-label=\"Sad face emoji\">\n          😞\n        </span>\n      </p>\n    </section>\n  );\n};\n\nexport default NotFound;\n","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Route,\n  Redirect,\n  Switch,\n} from \"react-router-dom\";\nimport CookieManager from \"./services/CookieManager\";\nimport Header from \"./components/Header\";\nimport routes from \"./settings/routes\";\n\nconst App = () => {\n  const isLogged = CookieManager.get(\"jwt\") ? true : false;\n\n  const renderPage = (guard = false, component) => {\n    const Page = component;\n    if (!guard) return <Page />;\n    return isLogged ? (\n      <Page />\n    ) : (\n      <Redirect to={`${process.env.PUBLIC_URL}${routes.signIn.path}`} />\n    );\n  };\n\n  const pages = Object.keys(routes).map((key, index) => {\n    const { path, component, guard } = routes[key];\n    return (\n      <Route\n        key={index}\n        exact\n        path={`${process.env.PUBLIC_URL}${path}`}\n        render={() => renderPage(guard, component)}\n      />\n    );\n  });\n\n  return (\n    <Router>\n      <>\n        <Header pages={routes} isLogged={isLogged} />\n        <main>\n          <Switch>{pages}</Switch>\n        </main>\n      </>\n    </Router>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App.jsx\";\nimport \"./styles/main.scss\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}