(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(e,a,t){e.exports=t(57)},56:function(e,a,t){},57:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(24),l=t.n(c),u=t(7),i=t(10),o=function(e){var a=document.cookie.match(new RegExp("(^| )".concat(e,"=([^;]+)")));return a?a[2]:null},s=function(e){document.cookie="".concat(e,"=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/saint-jacques")},m=function(e){var a=e.pages,t=Object.keys(a).map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(i.b,{exact:!0,to:"".concat("/saint-jacques").concat(a[e].path),activeClassName:"active"},a[e].label))}));return r.a.createElement("header",{className:"header"},r.a.createElement("span",{className:"header__brand"},"Saint Jacques"),r.a.createElement("nav",null,r.a.createElement("ul",{className:"header__menu"},t)))},p=function(){return document.title="Saint Jacques",r.a.createElement("section",{className:"page"},r.a.createElement("h1",null,"Bienvenue sur Saint Jacques"))},d=t(2),E=t(27),f=t.n(E).a.create({baseURL:"https://saint-jacques.herokuapp.com/api"});f.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status&&(s("jwt"),window.location.replace("".concat("/saint-jacques").concat(q.login.path))),Promise.reject(e)}));var v=f,h=t(28),b=function(e){return r.a.createElement("button",{className:"button button--primary"},e.children)},g=function(e){var a=Object(n.useState)({}),t=Object(d.a)(a,2),c=t[0],l=t[1],u=function(e){var a=Object(h.a)({},c);e.valid?a[e.name]=e:(delete a[e.name].value,a[e.name].valid=!1),l(a)},i=r.a.Children.map(e.children,(function(e){return r.a.cloneElement(e,{inputChange:u})}));return Object(n.useEffect)((function(){var a={};e.children.forEach((function(e){a[e.props.name]={name:e.props.name,valid:!e.props.required,required:!!e.props.required}})),l(a)}),[e.children,l]),r.a.createElement("form",{className:"form",onSubmit:function(a){a.preventDefault(),function(){var a={},t=!1;Object.keys(c).forEach((function(e){t||(c[e].valid?Object.prototype.hasOwnProperty.call(c[e],"value")&&(a[c[e].name]=c[e].value):t=!0)})),t||e.submit(a)}()}},i,r.a.createElement(b,null,"Se connecter"))},j=function(e){var a=Object(n.useState)(""),t=Object(d.a)(a,2),c=t[0],l=t[1],u=Object(n.useState)(!0),i=Object(d.a)(u,2),o=i[0],s=i[1],m=function(a){if(e.validation){var t=a.target.value;if(!e.required||t){var n=new RegExp("[^@]+@[^.]+..+"),r=t.match(n);s(!!r)}else s(!1)}};return r.a.createElement("div",{className:"input"},r.a.createElement("label",{className:"input__label",htmlFor:e.name},e.label),r.a.createElement("input",{className:"input__input",type:"email",value:c,name:e.name,required:e.required,onChange:function(a){o||m(a),function(a){var t=a.target,n=t.value,r=t.name;l(n),e.inputChange({name:r,value:n,valid:o,required:e.required})}(a)},onBlur:function(e){return m(e)}}),o?"":r.a.createElement("p",{className:"input__error"},"L'adresse email n'est pas valide"))},O=function(e){var a=Object(n.useState)(""),t=Object(d.a)(a,2),c=t[0],l=t[1],u=Object(n.useState)(!0),i=Object(d.a)(u,2),o=i[0],s=i[1],m=function(a){if(e.validation){var t=a.target.value;if(!e.required||t){var n=new RegExp("^.*(?=.{8,})((?=.*[!@#$%^&*()-_=+{};:,<.>]){1})(?=.*d)((?=.*[a-z]){1})((?=.*[A-Z]){1}).*$"),r=t.match(n);s(!!r)}else s(!1)}};return r.a.createElement("div",{className:"input"},r.a.createElement("label",{className:"input__label",htmlFor:e.name},e.label),r.a.createElement("input",{className:"input__input",type:"password",value:c,name:e.name,required:e.required,onChange:function(a){o||m(a),function(a){var t=a.target,n=t.value,r=t.name;l(n),e.inputChange({name:r,value:n,valid:o,required:e.required})}(a)},onBlur:function(e){return m(e)}}),o?r.a.createElement(r.a.Fragment,null):r.a.createElement("p",{className:"input__error"},"Le mot de passe doit contenir au moins 8 characters (dont au moins 1 majuscule, 1 minuscule, 1 chiffre et 1 caract\xe8re sp\xe9cial)"))},q={home:{path:"/",label:"Accueil",component:p,guard:!1},spots:{path:"/spots",label:"Spots",component:function(){document.title="Saint Jacques | Spots";var e=Object(n.useState)([]),a=Object(d.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(!0),u=Object(d.a)(l,2),i=u[0],o=u[1],s=Object(n.useState)(!1),m=Object(d.a)(s,2),p=m[0],E=m[1];Object(n.useEffect)((function(){v.get("/spots").then((function(e){var a=e.data;c(a["hydra:member"]),o(!1)})).catch((function(){o(!1),E(!0)}))}),[]);return r.a.createElement("section",{className:"page"},r.a.createElement("h1",null,"Tous les spots"),i?r.a.createElement("span",null,"Chargement..."):p?r.a.createElement("span",null,"Une erreur est survenue."):t.length?r.a.createElement("ul",null,t.map((function(e,a){return r.a.createElement("li",{key:a},r.a.createElement("h3",null,e.name),r.a.createElement("span",null,"Longitude : ",e.longitude),r.a.createElement("span",null,"Latitude : ",e.longitude),r.a.createElement("p",null,e.description))}))):r.a.createElement("span",null,"Aucun spot trouv\xe9."))},guard:!0},login:{path:"/login",label:"Se connecter",component:function(){document.title="Saint Jacques | Connexion";var e=Object(n.useState)(!1),a=Object(d.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(!1),u=Object(d.a)(l,2),i=u[0],o=u[1],s=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,i?r.a.createElement("span",null,"Les identifiants saisis ne sont pas valides."):r.a.createElement(r.a.Fragment,null)),r.a.createElement(g,{submit:function(e){return function(e){c(!0);var a=e.email,t=e.password;v.post("/login",{body:{email:a,password:t}}).then((function(e){console.log(e)})).catch((function(){c(!1),o(!0)}))}(e)}},r.a.createElement(j,{required:!0,validation:!0,name:"email",label:"Email"}),r.a.createElement(O,{required:!0,validation:!1,name:"password",label:"Mot de passe"})))};return r.a.createElement("section",{className:"page page--login"},r.a.createElement("h1",null,"Se connecter"),t?r.a.createElement("span",null,"Chargement..."):s())},guard:!1}},S=function(){var e=!!o("jwt"),a=Object.keys(q).map((function(a,t){var n=q[a],c=n.path,l=n.component,i=n.guard;return r.a.createElement(u.b,{key:t,exact:!0,path:"".concat("/saint-jacques").concat(c),render:function(){return function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t;return a?e?r.a.createElement(n,null):r.a.createElement(u.a,{to:"".concat("/saint-jacques").concat(q.login.path)}):r.a.createElement(n,null)}(i,l)}})}));return r.a.createElement(i.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(m,{pages:q}),r.a.createElement("main",null,r.a.createElement(u.d,null,a))))};t(56);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.af043215.chunk.js.map